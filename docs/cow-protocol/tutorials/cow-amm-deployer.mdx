---
sidebar_position: 6
---

# Deploying a CoW AMM

In this short tutorial, we describe how one can create and deploy their own Balancer CoW AMM.

The current factory contract addresses are the following:
- Ethereum Mainnet: [`0x23fcC2166F991B8946D195de53745E1b804C91B7`](https://etherscan.io/address/0x23fcC2166F991B8946D195de53745E1b804C91B7#code)
- Gnosis Chain: [`0x7573B99BC09c11Dc0427fb9c6662bc603E008304`](https://gnosisscan.io/address/0x7573B99BC09c11Dc0427fb9c6662bc603E008304#code)
- Sepolia Testnet: [`0x9F151748595bAA8829d44448Bb3181AD6b995E8e`](https://sepolia.etherscan.io/address/0x9F151748595bAA8829d44448Bb3181AD6b995E8e#code)

1. In order to create a new pool, one first needs to call the `newBPool` function of the factory contract. An example transaction that creates a new pool can be found [here](https://etherscan.io/tx/0x7543a97853827e267ecd3c1309509ac7704e4f85a53fbfacd6060f461d85bad8#eventlog). The relevant `LOG_NEW_POOL` log also reveals the address of the newly created pool; in our example transaction, it is `0x81530e9B069c69F6671A0A9d7Ee337cafEF419F6`.

:::note

In case ABI of the factory contract is not fetched, the ABI from the Sepolia network can be used.
:::

2. Once the new pool has been created, the next step is to approve the tokens we want to add to the pool; this can be done by calling the `approve()` function of the contract of the relevant ERC-20 token we are interested in adding to the pool, where the "spender" needs to be set to the newly created address.

:::caution

One needs to taken the token's decimals into account in order to set the correct approval.
:::


3. The next step is to bind the approved tokens to the pool, by using the `bind()` function of the newly created pool contract. We need to do one bind per token that will be added to the pool. Note that the `denorm` parameter should always be set to 1000000000000000000 (i.e., 10^18).


4. We can then set the swap fee; this is the fee trades will pay if they trade permissionlessly (i.e., outside of the batch), and this is done by calling the `setSwapFee()` function of the pool contract. The fee parameter needs to be specified in wei, hence, a 10% fee would be 100000000000000000 (i.e., 10^17)

:::caution

The fee parameter is an unsigned integer where 10^18 corresponds to 100% of fee. Note that 100% is actually not a valid value though, but one can set up to 99.99% (this needs to be verified).
:::


5. The final step is to finalize the pool by calling the `finalize()` function of the newly created pool contract.
