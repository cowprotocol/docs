---
sidebar_position: 3
---

import Image from '@theme/IdealImage';
import TokenApprovalWarning from '../../../partials/_token_approvals.mdx'

# TWAP Orders

Time-Weighted Average Price (TWAP) orders are an advanced feature of CoW Protocol, ideal for executing large trades with minimal price impact by distributing the order over a specified time.

## Introduction to TWAP Orders

TWAP orders allow you to split a large trade into smaller parts, executed at regular intervals. This helps in minimizing market impact and achieving a better average price.

### Key Points

- Ideal for trades over $5k on Mainnet.
- Lower minimums ($5) on Gnosis Chain for smaller trades.
- Reduces price impact on large orders.

---


# Placing a TWAP Order

### Step 1: Connect Your Safe Wallet

Navigate to CoW Swap and connect your Safe wallet. Access TWAP orders via the “TWAP” tab near the center module or the drop-down menu next to the CoW Swap logo.

<Image img={require('/img/cowswap/TWAP_connect.png')} alt="Access TWAP Interface" />

---

### Step 2: Select Your Tokens

Choose the token you wish to sell (e.g., `WETH`) and enter the total amount you wish to sell.

<Image img={require('/img/cowswap/TWAP_selectToken.png')} alt="Select Tokens" />

---

### Step 3: Specify Order Parameters

This is a critical step where you'll define how your order will be executed over time. Here’s how to fine-tune your TWAP order settings:

<Image img={require('/img/cowswap/TWAP_params.png')} alt="Order parameters" style={{ maxWidth: '470px' }} />

1. **Price Protection**: This is a measure to prevent your order from being executed at a price that's too far from the market price when the order was placed. Set the percentage of price protection to define the acceptable price range for your trades. For instance, a 10% price protection means that your order will not execute if the price moves unfavorably by more than 10% from the price at the time the order was made.

2. **Number of Parts**: Decide how many discrete parts you want to divide your order into. This choice will determine the granularity of your TWAP strategy. For example, if you choose to split your order into 2 parts and you are selling a total of 2 WETH, each part will involve selling 1 WETH.

3. **Total Duration**: Choose the total time frame over which your order should be executed. The TWAP strategy will distribute your trades evenly across this duration. Select from predefined durations like 1 hour, or set a custom duration based on your trading strategy.

4. **Part Duration** (read-only): View the duration of each individual part of your order. It is calculated automatically as the total duration divided by the number of parts. For instance, if your total duration is 1 hour and you have 2 parts, each part will have a duration of 30 minutes.

5. **Sell per Part** (read-only): After setting the number of parts and the total duration, the interface will display the sell amount for each part. Ensure this aligns with your trade expectations.

6. **Buy per Part** (read-only): Similarly, for a buy TWAP order, this will indicate how much of the token you are looking to purchase in each part of the order.

Carefully review and adjust your order parameters to align with market conditions, anticipated movements, and your trading objectives, as they are crucial in dictating the execution and efficacy of your TWAP strategy. Once you have tailored these details to your satisfaction, you can move on to the next step to finalize and place your order.

---

### Unsupported wallet? Upgrade Safe Fallback Handler

If your wallet is unsupported, upgrade to a Safe with the special fallback handler required for TWAP orders. Learn all about the new Safe fallback handler in this [article](https://blog.cow.fi/all-you-need-to-know-about-cow-swaps-new-safe-fallback-handler-8ef0439925d1) and its relevance to Safe in this [overview](https://help.safe.global/en/articles/40838-what-is-a-fallback-handler-and-how-does-it-relate-to-safe). The upgrade process has undergone extensive auditing, which you can review [here](https://github.com/cowprotocol/composable-cow/tree/ab3addad9bc05acdbf5fb040eb5c336209b58e31/audits).

<Image img={require('/img/cowswap/TWAP_unsupported.png')} alt="Unsupported wallet" style={{ maxWidth: '440px' }} />

---

### Step 4: Review and Confirm Your Order

Check all the details of your order, including price protection and limit price. Once you approve the details, sign the transaction in your Safe interface.

<TokenApprovalWarning token="YourToken" spender="TWAPContract" />

Be careful when signing an intent to trade. All of the associated parameters are final and cannot be changed once the intent is signed and submitted to the API. If you make a mistake, you will need to cancel the intent and create a new one. You can do this in the orders overview.

<Image img={require('/img/cowswap/TWAP_review.png')} alt="Review order" />

---

### Step 5: Order Finalization and Monitoring

After the necessary signatures are completed, your order will be finalized and visible in the “Your Orders” section. You can get a high-level overview, see the different parts of your TWAP order, or click into the order for full details.

<Image img={require('/img/cowswap/TWAP_orderSubmitted.png')} alt="Order successfully submitted" style={{ maxWidth: '470px' }} />
<Image img={require('/img/cowswap/TWAP_orderSigning.png')} alt="Order signing" />
<Image img={require('/img/cowswap/TWAP_ordersOverview.png')} alt="Orders overview" />
<Image img={require('/img/cowswap/TWAP_orderReceipt.png')} alt="Orders receipt"  style={{ maxWidth: '470px' }}/>

---

## Conclusion

TWAP orders are a strategic approach for large trades, reducing price impact and securing better average prices. Try it out and let us know your experience!